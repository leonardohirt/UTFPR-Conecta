<app-main-navbar></app-main-navbar>

<div class="min-h-screen bg-gray-50 flex flex-col items-center py-10">
  <div class="w-full max-w-5xl bg-white rounded-2xl shadow p-4">
    <h1 class="text-2xl font-semibold text-center mb-6 sm:text-xl">Cadastre um novo evento</h1>

    <!-- Informações Básicas -->
    <section class="mb-8">
      <h2 class="text-lg font-semibold mb-4">Informações básicas</h2>
      <div class="space-y-4 text-sm">

        <div>
          <label class="block font-medium mb-1">Nome do Evento *</label>
          <input
            type="text"
            [(ngModel)]="nome"
            placeholder="Ex: Semana da Tecnologia"
            class="w-full border border-gray-300 rounded-lg px-3 py-2
                   focus:ring-2 focus:ring-yellow-500 focus:outline-none"
          />
        </div>

        <div>
          <label class="block font-medium mb-1">Descrição Completa do Evento *</label>
          <textarea
            [(ngModel)]="descricao"
            placeholder="Descreva em detalhes o que acontecerá no evento."
            class="w-full border border-gray-300 rounded-lg px-3 py-2
                   focus:ring-2 focus:ring-yellow-500 focus:outline-none"
          ></textarea>
        </div>

        <div>
          <label class="block font-medium mb-1">Imagem/banner do evento *</label>
          <input
            type="file"
            (change)="onBannerSelected($event)"
            class="w-full border border-gray-300 rounded-lg px-3 py-2
                   focus:ring-2 focus:ring-yellow-500 focus:outline-none"
          />
        </div>

      </div>
    </section>

    <!-- Sobre o Evento -->
    <section class="mb-8 border-t pt-6 text-sm">
      <h2 class="text-sm font-semibold mb-4">Sobre o evento</h2>

      <div class="grid md:grid-cols-2 gap-4">
        <div>
          <label class="block font-medium mb-1">Data *</label>
          <input type="date" [(ngModel)]="data" class="input-base" />
        </div>

        <div class="flex space-x-2">
          <div class="flex-1">
            <label class="block font-medium mb-1">Hora Início *</label>
            <input type="time" [(ngModel)]="horaInicio" class="input-base" />
          </div>

          <div class="flex-1">
            <label class="block font-medium mb-1">Hora Fim *</label>
            <input type="time" [(ngModel)]="horaFim" class="input-base" />
          </div>
        </div>
      </div>

      <!-- Formato -->
      <div class="mt-4">
        <span class="block font-medium mb-1">Formato *</span>
        <div class="flex gap-4">
          <label class="flex items-center gap-2">
            <input type="radio" name="formato" value="presencial" [(ngModel)]="formato" class="accent-yellow-500" />
            Presencial
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="formato" value="online" [(ngModel)]="formato" class="accent-yellow-500" />
            Online
          </label>
        </div>
      </div>

      <!-- Endereço -->
      <div class="mt-4 space-y-3">
        <label class="block font-medium mb-1">Endereço *</label>

        <div class="flex gap-2">
          <input type="text" [(ngModel)]="cep" (blur)="buscarEndereco()" placeholder="Digite o CEP" class="input-base w-1/3" />
          <app-button type="button" color="primary-yellow" (click)="buscarEndereco()">Buscar</app-button>
        </div>

        <input type="text" [(ngModel)]="endereco.rua" placeholder="Rua" class="input-base" />
        <input type="text" [(ngModel)]="endereco.bairro" placeholder="Bairro" class="input-base" />
        <input type="text" [(ngModel)]="endereco.cidade" placeholder="Cidade" class="input-base" />
        <input type="text" [(ngModel)]="endereco.estado" placeholder="Estado" class="input-base" />
      </div>

      <!-- Categoria -->
      <div class="mt-4">
        <span class="block font-medium mb-1">Categoria *</span>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
          <label class="flex items-center gap-2">
            <input type="radio" name="categoria" value="Sistemas para Internet" [(ngModel)]="categoria" class="accent-yellow-500" />
            Sistemas para Internet
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="categoria" value="Engenharia Mecânica" [(ngModel)]="categoria" class="accent-yellow-500" />
            Engenharia Mecânica
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="categoria" value="Engenharia Mecatrônica" [(ngModel)]="categoria" class="accent-yellow-500" />
            Engenharia Mecatrônica
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="categoria" value="Engenharia Civil" [(ngModel)]="categoria" class="accent-yellow-500" />
            Engenharia Civil
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="categoria" value="Eventos Gerais" [(ngModel)]="categoria" class="accent-yellow-500" />
            Eventos Gerais
          </label>
        </div>
      </div>
    </section>

    <!-- Inscrições e certificados -->
    <section class="mb-8 border-t pt-6 text-sm">
      <h2 class="text-base font-medium mb-4">Inscrições e certificados</h2>

      <div class="space-y-4">
        <div>
          <span class="block font-medium mb-1">Tipo de inscrição *</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-2">
              <input type="radio" name="inscricao" value="gratuito" [(ngModel)]="tipoInscricao" class="accent-yellow-500" /> Gratuito
            </label>
            <label class="flex items-center gap-2">
              <input type="radio" name="inscricao" value="pago" [(ngModel)]="tipoInscricao" class="accent-yellow-500" /> Pago
            </label>
          </div>
        </div>

        <div>
          <label class="block font-medium mb-1">Limite de vagas</label>
          <input type="number" [(ngModel)]="limiteVagas" placeholder="Ex: 100" class="input-base" />
        </div>

        <div>
          <span class="block font-medium mb-1">Emite certificado</span>
          <div class="flex gap-4">
            <label class="flex items-center gap-2">
              <input type="radio" name="cert" value="true" [(ngModel)]="emiteCertificado" class="accent-yellow-500" /> Sim
            </label>
            <label class="flex items-center gap-2">
              <input type="radio" name="cert" value="false" [(ngModel)]="emiteCertificado" class="accent-yellow-500" /> Não
            </label>
          </div>
        </div>
      </div>
    </section>

    <!-- Botões -->
    <div class="flex justify-center gap-4 mt-8 text-base flex-col px-3">
      <button class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-6 rounded-lg h-12">
        Salvar rascunho
      </button>

      <app-button type="button" class="w-full h-12" color="primary-yellow" (click)="enviarEvento()">
        {{ isSubmitting ? 'Enviando...' : 'Enviar para aprovação' }}
      </app-button>
    </div>

    <!-- MODAL -->
    <div *ngIf="showModal" class="fixed inset-0 z-50 flex items-center justify-center">
      <div class="absolute inset-0 bg-black/50" (click)="closeModal()"></div>
      <div class="relative bg-white rounded-xl shadow-xl p-6 w-full max-w-sm mx-4 z-50">
        <div class="flex items-start gap-4">
          <div>
            <svg *ngIf="modalType === 'success'" class="w-8 h-8 text-green-500" fill="none" viewBox="0 0 24 24">
              <path d="M5 13l4 4L19 7" stroke="currentColor" stroke-width="2"/>
            </svg>
            <svg *ngIf="modalType === 'error'" class="w-8 h-8 text-red-500" fill="none" viewBox="0 0 24 24">
              <path d="M6 18L18 6M6 6l12 12" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <div class="flex-1">
            <h3 class="text-lg font-semibold">{{ modalType === 'success' ? 'Sucesso' : 'Erro' }}</h3>
            <p class="mt-1 text-gray-700">{{ modalMessage }}</p>
          </div>
          <button (click)="closeModal()" class="text-gray-400 hover:text-gray-600">✕</button>
        </div>
      </div>
    </div>

  </div>
</div>

<app-footer></app-footer>
